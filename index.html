<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pawana ‚Äì ‡∏ó‡∏≥‡∏ö‡∏∏‡∏ç & ‡∏™‡∏≤‡∏¢‡∏°‡∏π (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á)</title>
<style>
/* -----------------------
   Reset & variables
   ----------------------- */
*{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#f6f7fb; --card:#ffffff; --muted:#6b6b72; --accent:#0071e3; --accent-2:#ff8a00;
  --glass: rgba(255,255,255,0.7);
  --success:#18a999;
  --danger:#ff4d4f;
  --shadow: 0 8px 24px rgba(11,15,30,0.06);
}
html,body{height:100%}
body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans', 'Helvetica Neue', Arial; background:var(--bg); color:#141417; -webkit-font-smoothing:antialiased;}
.container{max-width:1200px;margin:48px auto;padding:0 20px}
header{position:sticky;top:0;z-index:80;background:linear-gradient(180deg, rgba(255,255,255,0.65), rgba(255,255,255,0.6));backdrop-filter:blur(8px);border-bottom:1px solid #ececec}
.header-inner{max-width:1200px;margin:0 auto;padding:20px}
.header-title{font-size:28px;font-weight:700}
.header-sub{color:var(--muted);font-size:14px}
/* -----------------------
   Sections
   ----------------------- */
.section{margin:36px 0}
.section .section-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
.section-title{font-size:22px;font-weight:700}
.section-sub{color:var(--muted);font-size:13px}
/* -----------------------
   Coins (top-up)
   ----------------------- */
.coin-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px}
.coin-card{background:linear-gradient(135deg,#fff7e6,#fff1cc);border-radius:14px;padding:18px;text-align:center;cursor:pointer;box-shadow:var(--shadow);border:1px solid rgba(0,0,0,0.03);transition:transform .22s ease,box-shadow .22s ease}
.coin-card:hover{transform:translateY(-6px);box-shadow:0 24px 48px rgba(11,15,30,0.12)}
.coin-emoji{font-size:28px}
.coin-value{font-size:20px;font-weight:700;margin-top:8px}
.coin-price{color:var(--muted);font-size:13px}
/* small badge for wallet */
.wallet{display:inline-flex;gap:8px;align-items:center}
.wallet-balance{background:linear-gradient(90deg,#fff,#eef6ff);padding:8px 12px;border-radius:999px;border:1px solid rgba(0,113,227,0.08);font-weight:600;color:var(--accent)}
/* -----------------------
   Packages carousel
   ----------------------- */
.packages-wrapper{position:relative;overflow:hidden}
.packages-slider{display:flex;gap:18px;padding:12px 6px;overflow-x:auto;scroll-behavior:smooth}
.packages-slider::-webkit-scrollbar{display:none}
.package-card{min-width:240px;background:linear-gradient(180deg,#ffffff,#f8fbff);border-radius:16px;padding:18px;border:1px solid rgba(10,14,40,0.04);box-shadow:var(--shadow);cursor:pointer;transition:transform .25s,box-shadow .25s}
.package-card:hover{transform:translateY(-8px);box-shadow:0 26px 48px rgba(11,15,30,0.12)}
.package-icon{font-size:44px}
.package-name{font-weight:700;margin-top:8px}
.package-price{color:var(--accent);font-weight:700;margin-top:6px}
.package-desc{color:var(--muted);font-size:13px;margin-top:8px}
.package-card.selected{outline:3px solid rgba(0,113,227,0.12);box-shadow:0 30px 60px rgba(0,113,227,0.07);transform:translateY(-10px) scale(1.02)}
/* CTA small */
.btn-ghost{background:transparent;border:1px solid rgba(0,0,0,0.06);padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer}
/* -----------------------
   Donation form
   ----------------------- */
.form-grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
.form-box{background:var(--card);border-radius:12px;padding:18px;border:1px solid rgba(0,0,0,0.04);box-shadow:var(--shadow)}
.input,textarea,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #e6e7eb;font-size:14px}
textarea{min-height:110px}
.btn-primary{background:linear-gradient(90deg,var(--accent),#0088ff);color:#fff;padding:12px 16px;border-radius:12px;border:none;font-weight:700;cursor:pointer}
/* -----------------------
   Ranking
   ----------------------- */
.ranking-grid{display:grid;gap:12px}
.rank-item{display:flex;align-items:center;gap:14px;padding:14px;border-radius:12px;background:linear-gradient(90deg,#fff,#fff7f0);cursor:pointer;border:1px solid rgba(0,0,0,0.03);transition:transform .24s,box-shadow .24s}
.rank-item:hover{transform:translateX(6px);box-shadow:0 18px 36px rgba(11,15,30,0.06)}
.rank-pos{min-width:56px;text-align:center;font-weight:800;font-size:20px;color:var(--muted)}
.rank-pos.top1{color:#f6b93b;text-shadow:0 4px 12px rgba(246,185,59,0.12)}
.rank-pos.top2{color:#c0c0c0}
.rank-pos.top3{color:#b87333}
.avatar{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(90deg,var(--accent),#00c2ff);color:#fff;font-weight:800}
.rank-name{font-weight:700}
.rank-amount{margin-left:auto;color:var(--accent);font-weight:800}
.rank-stars{margin-left:12px;color:#ffd166}
/* -----------------------
   News cards
   ----------------------- */
.news-slider{display:flex;gap:18px;overflow-x:auto;padding:8px 6px}
.news-card{min-width:320px;padding:16px;border-radius:12px;background:var(--card);border:1px solid rgba(0,0,0,0.04);cursor:pointer}
.news-cat{display:inline-block;padding:6px 10px;border-radius:999px;background:rgba(0,113,227,0.08);color:var(--accent);font-weight:700;font-size:12px}
.news-title{font-weight:800;margin-top:10px}
.news-snippet{color:var(--muted);margin-top:8px;font-size:14px}
/* -----------------------
   Modal & overlay
   ----------------------- */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.45);z-index:120}
.modal.show{display:flex}
.modal-card{width:min(760px,96%);background:var(--card);border-radius:14px;padding:22px;border:1px solid rgba(0,0,0,0.06);box-shadow:0 40px 100px rgba(11,15,30,0.2)}
.modal-header{display:flex;align-items:center;justify-content:space-between}
.modal-title{font-weight:800}
.modal-body{margin-top:12px;color:var(--muted);line-height:1.55}
.modal-close{background:transparent;border:0;font-weight:800;cursor:pointer}
/* -----------------------
   Particles (‡∏ö‡∏∏‡∏ç‡∏Å‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡πÉ‡∏à)
   ----------------------- */
.particles{position:fixed;pointer-events:none;left:0;top:0;width:100%;height:100%;z-index:200}
.particle{position:absolute;width:10px;height:10px;border-radius:6px;opacity:0;transform:translate(-50%,-50%) scale(0.8);animation:burst 900ms cubic-bezier(.2,.8,.2,1) forwards}
@keyframes burst{0%{opacity:1;transform:translate(-50%,-50%) scale(0.8)}70%{opacity:1}100%{opacity:0;transform:translate(-50%,-50%) scale(0.2)} }
/* small helpers */
.row{display:flex;gap:12px;align-items:center}
.small{font-size:13px;color:var(--muted)}
@media(max-width:900px){.form-grid{grid-template-columns:1fr}} 
</style>
</head>
<body>
<header>
  <div class="header-inner">
    <div class="row" style="justify-content:space-between">
      <div>
        <div class="header-title">Pawana<span style="color:var(--accent);"> ¬∑ ‡∏ö‡∏∏‡∏ç‡∏Å‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡πÉ‡∏à</span></div>
        <div class="header-sub">‡∏ó‡∏≥‡∏ö‡∏∏‡∏ç ¬∑ ‡∏™‡∏≤‡∏¢‡∏°‡∏π ¬∑ ‡∏Ç‡πà‡∏≤‡∏ß‡∏ò‡∏£‡∏£‡∏°‡∏∞</div>
      </div>
      <div class="wallet" aria-live="polite">
        <div class="small">‡∏¢‡∏≠‡∏î‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</div>
        <div class="wallet-balance" id="walletBalance">0</div>
      </div>
    </div>
  </div>
</header>

<main class="container" role="main">
  <!-- Coins / Top-up -->
  <section class="section" aria-labelledby="topupHead">
    <div class="section-head">
      <div>
        <div class="section-title">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç</div>
        <div class="section-sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏´‡∏£‡∏∑‡∏≠‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à</div>
      </div>
      <div class="small">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÅ‡∏ö‡∏ö release ‚Äî ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ</div>
    </div>

    <div class="coin-grid" id="coinGrid">
      <!-- generated by JS -->
    </div>
  </section>

  <!-- Packages -->
  <section class="section">
    <div class="section-head">
      <div>
        <div class="section-title">‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏ö‡∏∏‡∏ç</div>
        <div class="section-sub">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡∏™‡πà‡∏á‡∏ö‡∏∏‡∏ç" ‡∏ó‡∏µ‡πà‡∏ü‡∏≠‡∏£‡πå‡∏°</div>
      </div>
      <div class="row">
        <button class="btn-ghost" id="prevPack">‚Äπ</button>
        <button class="btn-ghost" id="nextPack">‚Ä∫</button>
      </div>
    </div>
    <div class="packages-wrapper">
      <div class="packages-slider" id="packagesSlider" tabindex="0" aria-label="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à"></div>
    </div>
  </section>

  <!-- Donation form and preview -->
  <section class="section">
    <div class="section-head">
      <div>
        <div class="section-title">‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ</div>
        <div class="section-sub">‡∏™‡πà‡∏á‡∏ö‡∏∏‡∏ç‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå</div>
      </div>
      <div class="small">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ ‡∏¢‡∏≠‡∏î‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</div>
    </div>

    <div class="form-grid">
      <div class="form-box">
        <form id="donationForm">
          <label class="small">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ</label>
          <input id="donorName" class="input" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏´‡∏°‡∏≤‡∏¢" required>
          <label class="small" style="margin-top:10px">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏î / ‡∏®‡∏≤‡∏™‡∏ô‡∏≤</label>
          <select id="temple" class="input" required>
            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
            <option>üõï ‡∏ß‡∏±‡∏î‡∏û‡∏∏‡∏ó‡∏ò</option>
            <option>üå≥ ‡∏ß‡∏±‡∏î‡∏õ‡πà‡∏≤</option>
            <option>üçö ‡πÇ‡∏£‡∏á‡∏ó‡∏≤‡∏ô</option>
            <option>‚õ™ ‡πÇ‡∏ö‡∏™‡∏ñ‡πå‡∏Ñ‡∏£‡∏¥‡∏™‡∏ï‡πå</option>
            <option>üïå ‡∏°‡∏±‡∏™‡∏¢‡∏¥‡∏î</option>
            <option>üîÆ ‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏°‡∏π</option>
          </select>
          <label class="small" style="margin-top:10px">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô / ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</label>
          <textarea id="prayer" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"></textarea>

          <div style="display:flex;gap:10px;margin-top:12px;align-items:center">
            <div class="small">‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</div>
            <div id="selectedPackageLabel" class="small" style="font-weight:700;color:var(--accent)">‡πÑ‡∏°‡πà‡∏°‡∏µ</div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px">
            <button type="submit" class="btn-primary">‡∏™‡πà‡∏á‡∏ö‡∏∏‡∏ç</button>
            <button type="button" id="btnDonateCustom" class="btn-ghost">‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏≠‡∏á</button>
          </div>
        </form>
      </div>

      <div>
        <div class="form-box">
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div>
              <div class="small">‡∏û‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ</div>
              <div style="font-weight:800;font-size:18px;margin-top:6px" id="previewDonate">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à</div>
              <div class="small" id="previewPrayer" style="margin-top:8px;color:var(--muted)"></div>
            </div>
            <div style="text-align:center">
              <div class="small">‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
              <div style="font-weight:800;color:var(--accent);font-size:20px" id="previewAmount">‡∏ø0</div>
            </div>
          </div>
          <div style="margin-top:12px" class="small">* ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏™‡πà‡∏á‡∏ö‡∏∏‡∏ç ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏¢‡∏≠‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å (‡∏à‡∏≥‡∏•‡∏≠‡∏á)</div>
        </div>

        <div style="height:16px"></div>

        <div class="form-box">
          <div class="small">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</div>
          <div style="height:10px"></div>
          <div class="ranking-grid" id="memberRanking" aria-live="polite"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- News -->
  <section class="section">
    <div class="section-head">
      <div>
        <div class="section-title">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ & ‡∏ò‡∏£‡∏£‡∏°‡∏∞</div>
        <div class="section-sub">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ï‡πá‡∏°</div>
      </div>
    </div>
    <div class="news-slider" id="newsSlider" tabindex="0"></div>
  </section>
</main>

<!-- modal for news & confirmations -->
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-card" role="document">
    <div class="modal-header">
      <div class="modal-title" id="modalTitle">Title</div>
      <button class="modal-close" id="modalClose">‚úï</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<!-- particle container -->
<div class="particles" id="particles"></div>

<script>
/* -----------------------
   Data (mock) ‚Äì release-ready
   ----------------------- */
const packages = [
  {id:1,name:'‡∏™‡∏≤‡∏¢‡∏ö‡∏∏‡∏ç',price:100,icon:'üôè',desc:'‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏ó‡∏≥‡∏ö‡∏∏‡∏ç‡∏á‡πà‡∏≤‡∏¢‡πÜ'},
  {id:2,name:'‡∏ß‡∏±‡∏î‡∏õ‡πà‡∏≤',price:200,icon:'üå≥',desc:'‡∏™‡∏≤‡∏¢‡∏°‡∏π-‡∏™‡∏á‡∏ö‡πÉ‡∏à'},
  {id:3,name:'‡∏™‡∏≤‡∏¢‡∏°‡∏π',price:300,icon:'üîÆ',desc:'‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤'},
  {id:4,name:'‡∏ö‡∏∏‡∏ç‡πÉ‡∏´‡∏ç‡πà',price:500,icon:'üåü',desc:'‡∏ö‡∏∏‡∏ç‡∏Å‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡πÉ‡∏à'},
  {id:5,name:'‡πÇ‡∏£‡∏á‡∏ó‡∏≤‡∏ô',price:150,icon:'üçö',desc:'‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡∏π‡πâ‡∏¢‡∏≤‡∏Å‡πÑ‡∏£‡πâ'}
];

let members = [
  {name:'‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏õ‡∏≠‡∏á',amount:14000000,avatar:'‡∏™'},
  {name:'‡∏´‡∏°‡∏≠‡∏ö‡∏µ',amount:6000000,avatar:'‡∏ö'},
  {name:'‡∏ô‡∏≤‡∏¢‡∏•‡∏∏‡∏á‡∏Å‡∏î',amount:5000000,avatar:'‡∏•'},
  {name:'‡∏™‡∏°‡∏ä‡∏≤‡∏¢',amount:1000000,avatar:'‡∏ä'},
  {name:'‡∏™‡∏°‡πÉ‡∏à',amount:500000,avatar:'‡∏à'},
];

const newsData = [
  {id:1,category:'‡∏ò‡∏£‡∏£‡∏°‡∏∞',title:'‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏ö‡∏≤‡∏ó 4: ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏à',content:'‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏≠‡∏¥‡∏ó‡∏ò‡∏¥‡∏ö‡∏≤‡∏ó 4 ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏≥‡πÑ‡∏õ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á'},
  {id:2,category:'‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°',title:'‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏≥‡∏ö‡∏∏‡∏ç‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏î‡∏î‡∏±‡∏á',content:'‡∏ß‡∏±‡∏î‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏´‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≤‡∏ñ‡∏≤‡∏ö‡∏π‡∏ä‡∏≤'},
  {id:3,category:'‡∏ß‡∏±‡∏î‡∏õ‡πà‡∏≤',title:'‡πÄ‡∏ó‡∏®‡∏ô‡πå‡∏°‡∏´‡∏≤‡∏ä‡∏≤‡∏ï‡∏¥',content:'‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡∏û‡∏£‡∏∞‡πÄ‡∏ß‡∏™‡∏™‡∏±‡∏ô‡∏î‡∏£‡∏™‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ó‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡∏™‡∏•‡∏∞'}
];

// Simulated current user wallet (browser-local for demo)
let currentUser = {name:'‡∏Ñ‡∏∏‡∏ì (‡∏Ñ‡∏∏‡∏ì)', coins:0};

/* -----------------------
   Utilities
   ----------------------- */
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
const format = n => n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');

/* -----------------------
   Render / UI functions
   ----------------------- */
function renderCoinGrid(){
  const grid = $('#coinGrid');
  const options = [100,500,1000,5000,10000];
  grid.innerHTML = options.map(a=>`
    <div class="coin-card" role="button" tabindex="0" onclick="topupCoins(${a},event)" onkeydown="if(event.key==='Enter') topupCoins(${a},event)">
      <div class="coin-emoji">üíé</div>
      <div class="coin-value">${format(a)} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç</div>
      <div class="coin-price">‡∏ø${format(a)}</div>
    </div>
  `).join('');
}

function renderPackages(){
  const slider = $('#packagesSlider');
  slider.innerHTML = packages.map((p,idx)=>`
    <div class="package-card" data-id="${p.id}" role="button" tabindex="0" onclick="onSelectPackage(${p.id}, event)" onkeydown="if(event.key==='Enter') onSelectPackage(${p.id}, event)">
      <div class="package-icon">${p.icon}</div>
      <div class="package-name">${p.name}</div>
      <div class="package-price">‡∏ø${format(p.price)}</div>
      <div class="package-desc">${p.desc}</div>
    </div>
  `).join('');
}

let selectedPackageId = null;
function onSelectPackage(id,ev){
  selectedPackageId = id;
  $$('#packagesSlider .package-card').forEach(c=>c.classList.remove('selected'));
  const card = $(`#packagesSlider .package-card[data-id='${id}']`);
  if(card) card.classList.add('selected');
  $('#selectedPackageLabel').textContent = packages.find(p=>p.id===id).name + ' ¬∑ ‡∏ø' + format(packages.find(p=>p.id===id).price);
  $('#previewDonate').textContent = packages.find(p=>p.id===id).name;
  $('#previewAmount').textContent = '‡∏ø' + format(packages.find(p=>p.id===id).price);
  $('#previewPrayer').textContent = '';
  // small visual burst when selecting special package
  if(packages.find(p=>p.id===id).desc.includes('‡∏Å‡∏£‡∏∞‡∏ä‡∏≤‡∏Å')){
    burstAtEvent(ev, 14);
  }
}

function renderMemberRanking(animate=true){
  // sort copy to avoid mutating
  members.sort((a,b)=>b.amount - a.amount);
  const grid = $('#memberRanking');
  grid.innerHTML = members.map((m,i)=>{
    const stars = i<3 ? '‚òÖ'.repeat(3-i) : '';
    const topClass = i===0? 'top1': i===1?'top2': i===2?'top3':'';
    return `
      <div class="rank-item" data-name="${m.name}" onclick="onClickMember('${encodeURIComponent(m.name)}')">
        <div class="rank-pos ${topClass}">${i+1}</div>
        <div class="avatar">${m.avatar || m.name.charAt(0)}</div>
        <div>
          <div class="rank-name">${m.name}<span class="rank-stars"> ${stars}</span></div>
          <div class="small">‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏£‡∏ß‡∏°</div>
        </div>
        <div class="rank-amount">‡∏ø${format(m.amount)}</div>
      </div>
    `;
  }).join('');
  // subtle reflow animation
  if(animate){
    setTimeout(()=>{$$('#memberRanking .rank-item').forEach((el,idx)=>{
      el.style.transition = 'transform .45s cubic-bezier(.2,.9,.2,1),opacity .45s';
      el.style.transform = 'translateY(8px)'; el.style.opacity = '0';
      setTimeout(()=>{ el.style.transform='translateY(0)'; el.style.opacity='1'; }, 40*idx);
    })}, 20);
  }
}

function renderNews(){
  const s = $('#newsSlider');
  s.innerHTML = newsData.map(n=>`
    <div class="news-card" data-id="${n.id}" onclick="openNews(${n.id})">
      <div class="news-cat">${n.category}</div>
      <div class="news-title">${n.title}</div>
      <div class="news-snippet">${n.content}</div>
    </div>
  `).join('');
}

/* -----------------------
   Actions
   ----------------------- */
function updateWalletUI(){
  $('#walletBalance').textContent = format(currentUser.coins) + ' ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç';
}

function topupCoins(amount, event){
  // simulate payment flow then add coins
  currentUser.coins += amount;
  updateWalletUI();
  showModal(`<strong>‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</strong><div style=\"margin-top:8px\">‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ï‡∏¥‡∏° ${format(amount)} ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</div>`);
  burstAtEvent(event, 18);
}

function onClickMember(nameEncoded){
  const name = decodeURIComponent(nameEncoded);
  const member = members.find(m=>m.name===name);
  if(member) showModal(`<strong>${member.name}</strong><div style=\"margin-top:8px\">‡∏¢‡∏≠‡∏î‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏£‡∏ß‡∏° ‡∏ø${format(member.amount)}</div>`);
}

function openNews(id){
  const n = newsData.find(x=>x.id===id);
  if(!n) return;
  $('#modalTitle').textContent = n.title;
  $('#modalBody').innerHTML = `<div style=\"color:${'#333'};font-weight:600;margin-bottom:8px\">${n.category}</div><div>${n.content}</div>`;
  openModal();
}

function openModal(){
  const m = $('#modal'); m.classList.add('show'); m.setAttribute('aria-hidden','false');
}
function closeModal(){
  const m = $('#modal'); m.classList.remove('show'); m.setAttribute('aria-hidden','true');
}

/* -----------------------
   Donation flow (updates ranking)
   ----------------------- */
function donate(amount,name,temple,prayer){
  // find existing member
  const existing = members.find(m=>m.name===name);
  if(existing){ existing.amount += amount; }
  else{ members.push({name,amount,avatar:name.charAt(0)}) }
  renderMemberRanking(true);
  showModal(`<strong>‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡πÇ‡∏°‡∏ó‡∏ô‡∏≤!</strong><div style=\"margin-top:8px\">${name} ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ ‡∏ø${format(amount)} ‡πÉ‡∏´‡πâ ${temple} <div style=\"margin-top:6px;color:var(--muted)\">${prayer || ''}</div></div>`);
  burstAtCenter(22);
}

/* -----------------------
   Particles (burst) implementation
   ----------------------- */
function burstAtEvent(event, count=12){
  // determine x,y from event
  const particles = $('#particles');
  let x=window.innerWidth/2, y=window.innerHeight/2;
  if(event && event.clientX !== undefined){ x = event.clientX; y = event.clientY; }
  for(let i=0;i<count;i++){
    const el = document.createElement('div');
    el.className='particle';
    el.style.left = x + 'px'; el.style.top = y + 'px';
    el.style.background = randomColor();
    el.style.transformOrigin = 'center';
    // random flight direction
    const angle = Math.random()*Math.PI*2;
    const dist = 40 + Math.random()*180;
    const tx = Math.cos(angle)*dist; const ty = Math.sin(angle)*dist;
    el.style.setProperty('--tx', tx+'px'); el.style.setProperty('--ty', ty+'px');
    el.animate([
      {transform:`translate(${0}px,${0}px) scale(1)`, opacity:1},
      {transform:`translate(${tx}px,${ty}px) scale(.6)`, opacity:0}
    ],{duration:800+Math.random()*400,easing:'cubic-bezier(.2,.8,.2,1)'});
    particles.appendChild(el);
    setTimeout(()=>el.remove(),1400);
  }
}

function burstAtCenter(count=16){ burstAtEvent({clientX:window.innerWidth/2, clientY:window.innerHeight/2}, count); }
function randomColor(){ const palette=['#ffd166','#06d6a0','#118ab2','#ef476f','#ff7b00','#845ec2']; return palette[Math.floor(Math.random()*palette.length)]; }

/* -----------------------
   Auto-scroll sliders with pause on hover
   ----------------------- */
function autoScroll(id, speed=40){
  const el = document.getElementById(id);
  if(!el) return;
  let pos=0; let dir=1;
  let raf;
  function step(){
    pos += dir*1; el.scrollLeft = pos;
    if(pos >= el.scrollWidth - el.clientWidth - 2) dir = -1;
    if(pos <= 0) dir = 1;
    raf = requestAnimationFrame(()=>setTimeout(step, speed));
  }
  const start = ()=>{ if(!raf) step(); };
  const stop = ()=>{ cancelAnimationFrame(raf); raf=null; };
  el.addEventListener('mouseenter', stop);
  el.addEventListener('mouseleave', start);
  start();
}

/* -----------------------
   Helpers: custom donate button (amount prompt)
   ----------------------- */
function donateCustom(){
  const name = ($('#donorName').value || currentUser.name).trim();
  const temple = $('#temple').value || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
  const prayer = $('#prayer').value || '';
  let q = prompt('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç)');
  if(!q) return;
  q = parseInt(q.toString().replace(/[^0-9]/g,''),10);
  if(isNaN(q) || q<=0){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'); return; }
  donate(q,name,temple,prayer);
}

/* -----------------------
   Event wiring & initialization
   ----------------------- */
document.addEventListener('DOMContentLoaded', ()=>{
  renderCoinGrid(); renderPackages(); renderMemberRanking(false); renderNews(); updateWalletUI();
  autoScroll('packagesSlider',40); autoScroll('newsSlider',50);

  // package nav
  $('#prevPack').addEventListener('click', ()=>{ document.getElementById('packagesSlider').scrollBy({left:-300,behavior:'smooth'}) });
  $('#nextPack').addEventListener('click', ()=>{ document.getElementById('packagesSlider').scrollBy({left:300,behavior:'smooth'}) });

  // donation form
  $('#donationForm').addEventListener('submit',(e)=>{
    e.preventDefault();
    const name = ($('#donorName').value || currentUser.name).trim();
    const temple = $('#temple').value || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
    const prayer = $('#prayer').value || '';
    let amount = 0;
    if(selectedPackageId){ amount = packages.find(p=>p.id===selectedPackageId).price; }
    else {
      const q = prompt('‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à\n‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ (‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç):');
      if(!q) return; amount = parseInt(q.toString().replace(/[^0-9]/g,''),10);
      if(isNaN(amount) || amount<=0){ alert('‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'); return; }
    }
    // check coins balance (simulate: coins == baht)
    if(currentUser.coins < amount){
      if(confirm('‡∏¢‡∏≠‡∏î‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡πÑ‡∏°‡πà‡∏û‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')){
        // focus top-up
        const first = document.querySelector('#coinGrid .coin-card'); if(first) first.scrollIntoView({behavior:'smooth',block:'center'});
        return;
      } else { /* allow paying with external payment in simulation */ }
    }
    // consume coins (optional) ‚Äî comment out to not deduct
    currentUser.coins = Math.max(0, currentUser.coins - amount);
    updateWalletUI();

    donate(amount,name,temple,prayer);

    // reset selection & form
    selectedPackageId = null; $$('#packagesSlider .package-card').forEach(c=>c.classList.remove('selected'));
    $('#selectedPackageLabel').textContent = '‡πÑ‡∏°‡πà‡∏°‡∏µ';
    $('#previewDonate').textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à';
    $('#previewAmount').textContent = '‡∏ø0';
    $('#donationForm').reset();
  });

  $('#btnDonateCustom').addEventListener('click', donateCustom);
  $('#modalClose').addEventListener('click', closeModal);
  $('#modal').addEventListener('click', (e)=>{ if(e.target.id==='modal') closeModal(); });
});

// expose some for inline handlers
window.topupCoins = topupCoins;
window.onSelectPackage = onSelectPackage;
window.openNews = openNews;
window.onClickMember = onClickMember;
window.showModal = (html)=>{ $('#modalTitle').textContent=''; $('#modalBody').innerHTML=html; openModal(); };
window.burstAtEvent = burstAtEvent;

</script>
</body>
</html>